<!DOCTYPE html>
<html>
  <head>
    <title>2D Plane Game</title>
    <style>
      canvas {
        background-color: #000;
      }
    </style>
  </head>
  <body>
    <canvas id="gameCanvas" width="800" height="600"></canvas>

    <script>
      // Set up the game canvas
      const canvas = document.getElementById("gameCanvas");
      const ctx = canvas.getContext("2d");

      // Load character sprites for different frames
      const characterFrames = [
        "frame1.png",
        "frame2.png",
        "frame3.png",
        "frame4.png"
      ];

      // Set up the character's initial position
      let characterX = 100;
      let characterY = 100;

      // Set up the character's movement speed
      const characterSpeed = 2; // Adjust the speed as needed

      // Set up animation variables
      let currentFrame = 0;
      let isMoving = false;
      let animationTimer = 0;
      const animationSpeed = 0.2; // Time (in seconds) between each frame

      // Load character frames
      const characterFramesImages = [];
      let framesLoadedCount = 0;

      for (let i = 0; i < characterFrames.length; i++) {
        const image = new Image();
        image.src = characterFrames[i];
        image.onload = () => {
          framesLoadedCount++;
          if (framesLoadedCount === characterFrames.length) {
            startGame();
          }
        };
        characterFramesImages.push(image);
      }

      // Handle keydown event for character movement
      window.addEventListener("keydown", (event) => {
        switch (event.key) {
          case "ArrowUp":
            characterY -= characterSpeed;
            isMoving = true;
            break;
          case "ArrowDown":
            characterY += characterSpeed;
            isMoving = true;
            break;
          case "ArrowLeft":
            characterX -= characterSpeed;
            isMoving = true;
            break;
          case "ArrowRight":
            characterX += characterSpeed;
            isMoving = true;
            break;
        }
      });

      // Handle keyup event to stop character movement and animation
      window.addEventListener("keyup", (event) => {
        switch (event.key) {
          case "ArrowUp":
          case "ArrowDown":
          case "ArrowLeft":
          case "ArrowRight":
            isMoving = false;
            animationTimer = 0;
            break;
        }
      });

      // Game loop
      function gameLoop() {
        // Update the animation if character is moving
        if (isMoving) {
          animationTimer += 1 / 60; // Assuming 60 FPS

          if (animationTimer >= animationSpeed) {
            currentFrame = (currentFrame + 1) % characterFrames.length;
            animationTimer = 0;
          }
        }

        // Clear the canvas
        ctx.clearRect(0, 0, canvas.width, canvas.height);

        // Draw the character
        ctx.drawImage(
          characterFramesImages[currentFrame],
          characterX,
          characterY
        );

        // Call the game loop again
        requestAnimationFrame(gameLoop);
      }

      // Start the game loop
      function startGame() {
        gameLoop();
      }

      // Call startGame after the document has loaded
      window.addEventListener("DOMContentLoaded", () => {
        startGame();
      });
    </script>
  </body>
</html>
