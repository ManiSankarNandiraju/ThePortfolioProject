<!DOCTYPE html>
<html>
  <head>
    <title>2D Plane Game</title>
    <style>
      canvas {
        background-color: #000;
      }
    </style>
  </head>
  <body>
    <canvas id="gameCanvas" width="800" height="600"></canvas>

    <script>
      // Set up the game canvas
      const canvas = document.getElementById("gameCanvas");
      const ctx = canvas.getContext("2d");

      // Load character sprites for different frames
      const characterFrames = [
        "frame1.png",
        "frame2.png",
        "frame3.png",
        "frame4.png"
      ];

      // Set up the character's initial position
      let characterX = 100;
      let characterY = 100;

      // Set up the character's movement speed
      const characterSpeed = 2; // Adjust the speed as needed

      // Set up animation variables
      let currentFrame = 0;
      let isMoving = false;
      let animationTimer = 0;
      const animationSpeed = 0.2; // Time (in seconds) between each frame

      // Load character frames
      const characterFramesImages = [];
      let framesLoadedCount = 0;

      for (let i = 0; i < characterFrames.length; i++) {
        const image = new Image();
        image.src = characterFrames[i];
        image.onload = () => {
          framesLoadedCount++;
          if (framesLoadedCount === characterFrames.length) {
            startGame();
          }
        };
        characterFramesImages.push(image);
      }

      // Set up the profile block
      const profileBlock = {
        x: 300,
        y: 200,
        width: 200,
        height: 200,
        isOpen: false
      };

      // Check if the character is halfway into the profile block
      function checkProfileInteraction() {
        const characterCenterX = characterX + characterFramesImages[currentFrame].width / 2;
        const characterCenterY = characterY + characterFramesImages[currentFrame].height / 2;

        if (
          characterCenterX > profileBlock.x &&
          characterCenterX < profileBlock.x + profileBlock.width &&
          characterCenterY > profileBlock.y &&
          characterCenterY < profileBlock.y + profileBlock.height
        ) {
          openProfilePage();
        }
      }

      // Open the profile page
      function openProfilePage() {
        if (!profileBlock.isOpen) {
          profileBlock.isOpen = true;
          window.location.href = "profile.html";
        }
      }

      // Rest of your existing game-related JavaScript code...
      // ...

      // Game loop
      function gameLoop() {
        // Update character position based on input
        if (keyState.up) characterY -= characterSpeed;
        if (keyState.down) characterY += characterSpeed;
        if (keyState.left) characterX -= characterSpeed;
        if (keyState.right) characterX += characterSpeed;

        // Update animation if character is moving
        if (isMoving) {
          animationTimer += 1 / 60; // Assuming 60 FPS
          if (animationTimer >= animationSpeed) {
            currentFrame = (currentFrame + 1) % characterFramesImages.length;
            animationTimer = 0;
          }
        }

        // Check for profile interaction
        checkProfileInteraction();

        // Clear the canvas
        ctx.clearRect(0, 0, canvas.width, canvas.height);

        // Draw the character
        ctx.drawImage(characterFramesImages[currentFrame], characterX, characterY);

        // Request the next animation frame
        requestAnimationFrame(gameLoop);
      }

      // Start the game
      function startGame() {
        // Request the first animation frame
        requestAnimationFrame(gameLoop);
      }

      // Rest of your existing game-related JavaScript code...
      // ...
    </script>
    <script src="profile_block.js"></script>
  </body>
</html>
