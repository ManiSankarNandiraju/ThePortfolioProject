<!DOCTYPE html>
<html>
  <head>
    <title>2D Plane Game</title>
    <style>
      canvas {
        background-color: #000;
      }
    </style>
  </head>
  <body>
    <canvas id="gameCanvas" width="800" height="600"></canvas>

    <script>
      // Set up the game canvas
      const canvas = document.getElementById("gameCanvas");
      const ctx = canvas.getContext("2d");

      // Load character sprites for different frames
      const characterFrames = [
        "frame1.png",
        "frame2.png",
        "frame3.png",
        "frame4.png"
      ];

      // Set up the character's initial position
      let characterX = 100;
      let characterY = 100;

      // Set up the character's movement speed
      const characterSpeed = 2; // Adjust the speed as needed

      // Set up animation variables
      let currentFrame = 0;
      let isMoving = false;
      let animationTimer = 0;
      const animationSpeed = 0.2; // Time (in seconds) between each frame

      // Load character frames
      const characterFramesImages = [];
      let framesLoadedCount = 0;

      for (let i = 0; i < characterFrames.length; i++) {
        const image = new Image();
        image.src = characterFrames[i];
        image.onload = () => {
          framesLoadedCount++;
          if (framesLoadedCount === characterFrames.length) {
            startGame();
          }
        };
        characterFramesImages.push(image);
      }

      // Handle touch events for character movement
      canvas.addEventListener("touchstart", handleTouchStart);
      canvas.addEventListener("touchmove", handleTouchMove);
      canvas.addEventListener("touchend", handleTouchEnd);

      let touchStartX = 0;
      let touchStartY = 0;
      let touchMoved = false;

      function handleTouchStart(event) {
        event.preventDefault();
        const touch = event.touches[0];
        touchStartX = touch.clientX;
        touchStartY = touch.clientY;
        touchMoved = false;
      }

      function handleTouchMove(event) {
        event.preventDefault();
        touchMoved = true;
      }

      function handleTouchEnd(event) {
        event.preventDefault();
        if (touchMoved) {
          const touch = event.changedTouches[0];
          const touchEndX = touch.clientX;
          const touchEndY = touch.clientY;
          handleTouchMovement(touchStartX, touchStartY, touchEndX, touchEndY);
        }
        touchMoved = false;
      }

      function handleTouchMovement(startX, startY, endX, endY) {
        const deltaX = endX - startX;
        const deltaY = endY - startY;
        const threshold = 50; // Adjust the threshold as needed

        if (Math.abs(deltaX) > Math.abs(deltaY)) {
          if (deltaX > threshold) {
            // Swipe right
            characterX += characterSpeed;
            isMoving = true;
          } else if (deltaX < -threshold) {
            // Swipe left
            characterX -= characterSpeed;
            isMoving = true;
          }
        } else {
          if (deltaY > threshold) {
            // Swipe down
            characterY += characterSpeed;
            isMoving = true;
          } else if (deltaY < -threshold) {
            // Swipe up
            characterY -= characterSpeed;
            isMoving = true;
          }
        }
      }

      // Handle keyboard events for character movement
      document.addEventListener("keydown", handleKeyDown);
      document.addEventListener("keyup", handleKeyUp);

      const keyMap = {
        ArrowUp: "up",
        ArrowDown: "down",
        ArrowLeft: "left",
        ArrowRight: "right"
      };

      const keyState = {
        up: false,
        down: false,
        left: false,
        right: false
      };

      function handleKeyDown(event) {
        const key = keyMap[event.key];
        if (key) {
          event.preventDefault();
          keyState[key] = true;
          isMoving = true;
        }
      }

      function handleKeyUp(event) {
        const key = keyMap[event.key];
        if (key) {
          event.preventDefault();
          keyState[key] = false;
          isMoving = false;
        }
      }

      // Game loop
      function gameLoop() {
        // Update character position based on input
        if (keyState.up) characterY -= characterSpeed;
        if (keyState.down) characterY += characterSpeed;
        if (keyState.left) characterX -= characterSpeed;
        if (keyState.right) characterX += characterSpeed;

        // Update animation if character is moving
        if (isMoving) {
          animationTimer += 1 / 60; // Assuming 60 FPS
          if (animationTimer >= animationSpeed) {
            currentFrame = (currentFrame + 1) % characterFramesImages.length;
            animationTimer = 0;
          }
        }

        // Clear the canvas
        ctx.clearRect(0, 0, canvas.width, canvas.height);

        // Draw the character
        ctx.drawImage(
          characterFramesImages[currentFrame],
          characterX,
          characterY
        );

        // Request the next animation frame
        requestAnimationFrame(gameLoop);
      }

      // Start the game
      function startGame() {
        // Request the first animation frame
        requestAnimationFrame(gameLoop);
      }
    </script>
  </body>
</html>
